"use strict";function createMarker(e,o){var n=e.geometry.location;markers[o]=new google.maps.Marker({map:map,position:n}),google.maps.event.addListener(markers[o],"click",function(){infoWindow.setContent(e.name),infoWindow.open(map,this)})}function searchForRetreats(e){var o=new google.maps.places.PlacesService(map);o.textSearch({location:e,radius:1e3,query:"meditation retreat"},showResults)}function showResults(e,o){if(o===google.maps.places.PlacesServiceStatus.OK)for(var n=0;n<e.length;n++)createMarker(e[n],n)}function handleLocationError(e,o,n){o.setPosition(n),o.setContent(e?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.")}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:-34.397,lng:150.644},zoom:12}),infoWindow=new google.maps.InfoWindow({map:map});var e,o=document.getElementById("pac-input");searchBox=new google.maps.places.SearchBox(o),map.controls[google.maps.ControlPosition.TOP_LEFT].push(o),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(o){e={lat:o.coords.latitude,lng:o.coords.longitude},infoWindow.setPosition(e),infoWindow.setContent("You"),map.setCenter(e),searchForRetreats(e)},function(){handleLocationError(!0,infoWindow,map.getCenter())}):handleLocationError(!1,infoWindow,map.getCenter()),searchBox.addListener("places_changed",function(){var e=searchBox.getPlaces();if(0!=e.length){markers.forEach(function(e){e.setMap(null)}),markers=[];var o=new google.maps.LatLngBounds;e.forEach(function(e){({url:e.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)});e.geometry.viewport?o.union(e.geometry.viewport):o.extend(e.geometry.location)}),map.fitBounds(o),searchForRetreats(o.getCenter())}})}var map,infoWindow,searchBox,markers=[];map||initMap();